System.register("chunks:///_virtual/ArrowState.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"44b7eXodERMMYuibZgrxHlM","ArrowState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TweenPool.ts","./gameConfig.ts"],(function(t){var e,i,s,o,n,r,a,h,l,c,d,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,o=t.Sprite,n=t.Collider2D,r=t.RigidBody2D,a=t.Vec3,h=t.Color,l=t.tween,c=t.Component},function(t){d=t.TweenPool},function(t){u=t.gameConfig}],execute:function(){var g;i._RF.push({},"6b8f2DsPoVCrb+5/T3rhIoT","Enemy",void 0);var m=s.ccclass;s.property,t("Enemy",m("Enemy")(g=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this).collider=void 0,e.rigidBody=void 0,e.sprite=void 0,e._onEnemyRemoveCB=void 0,e._target=void 0,e.hitFlg=0,e.id=void 0,e.state=void 0,e.now=0,e._startPos=new a,e._endPos=new a,e._tweens=new d,e._targetPos=new a,e.lastTotalTime=0,e._lastAni=void 0,e._isRemoved=!1,e}e(i,t);var s=i.prototype;return s.setHitFlg=function(t){this.hitFlg=t},s.getId=function(){return this.id},s.setTargetPos=function(t){this._targetPos.set(t)},s.onLoad=function(){this.hitFlg=0,this.sprite=this.node.getComponent(o),this.collider=this.node.getComponent(n),this.rigidBody=this.node.getComponent(r)},s.onEnable=function(){},s.start=function(){},s.init=function(t,e){this.hitFlg=0,this._isRemoved=!1,this._tweens.clear(),this.id=t.id,this.state=t,this._startPos.set(t.pos.x,t.pos.y),this._endPos.set(t.targetPos.x,t.targetPos.y),this.node.position=this._startPos,this.node.scale=new a(1,1,1),this.sprite?t.isUpgradeEnemy?this.sprite.color=h.RED:this.sprite.color=h.WHITE:console.error("Sprite 组件未找到！")},s.onEnemyRemoveCB=function(t,e){this._onEnemyRemoveCB=t,this._target=e},s.updateState=function(t,e){this.state=t,this.now=e,this._tweenState()},s._tweenState=function(){var t=this,e=new a(this.state.pos.x,this.state.pos.y);this._targetPos.equals(e)||(this._targetPos.set(e),this.setStatus("run"),this._tweens.add(l(this.node).to(1/u.syncRate,{position:this._targetPos}).call((function(){t.setStatus("idle")})).start()))},s.setStatus=function(t){},s.update=function(t){1==this.hitFlg&&(this.hitFlg=0,l(this.node).to(.5,{scale:new a(.2,.2,.2)}).call(this.enemyFallTweenComplete.bind(this)).start())},s.remove=function(){var t,e=this;this._isRemoved||(this._isRemoved=!0,this._tweens.clear(),this.node.removeFromParent(),null==(t=this._onEnemyRemoveCB)||t.call(this._target,this.getId()),this.scheduleOnce((function(){e.node.active=!1}),1))},s.enemyFallTweenComplete=function(t){this.remove()},i}(c))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var u;n._RF.push({},"4f832S8JZ9JD4HdmqIZeDZQ","EnemyBullet",void 0);var c=r.ccclass;r.property,t("EnemyBullet",c("EnemyBullet")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyState.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"27033oBoo1Ld5Xt4sefC1t7","EnemyState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/env.ts",["cc","./index.mjs"],(function(){var e;return{setters:[function(n){e=n.cclegacy},null],execute:function(){e._RF.push({},"0688cAvpN9MyYYi1PzlVhOQ","env",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Flight.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TweenPool.ts","./gameConfig.ts","./Enemy.ts"],(function(t){var e,i,n,o,s,l,a,h,r,c,d,g,u,f;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.Collider2D,s=t.Contact2DType,l=t.Animation,a=t.tween,h=t.Vec3,r=t.RigidBody2D,c=t.Vec2,d=t.Component},function(t){g=t.TweenPool},function(t){u=t.gameConfig},function(t){f=t.Enemy}],execute:function(){var _;i._RF.push({},"bffafR8+DBI4ag+n/Fp++9N","Flight",void 0);var p=n.ccclass;n.property,t("Flight",p("Flight")(_=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).collider=void 0,e.ani=void 0,e.hitFlg=0,e.playerId=void 0,e.isSelf=!1,e.state=void 0,e.now=0,e._tweens=new g,e._targetPos=new h,e._onAddOneBulletCB=void 0,e._onFlightDead=void 0,e._onFlightRemoveCB=void 0,e._target=void 0,e._lastAni=void 0,e}e(i,t);var n=i.prototype;return n.setHitFlg=function(t){this.hitFlg=t},n.getPlayerId=function(){return this.playerId},n.setTargetPos=function(t){this._targetPos=t},n.init=function(t,e){this.playerId=t.id,this.isSelf=e,e&&this.schedule(this.sendAddOneBullReqetReq,.8)},n.sendAddOneBullReqetReq=function(){var t;"idle"!=this._lastAni&&(null==(t=this._onAddOneBulletCB)||t.call(this._target,this.playerId))},n.onAddOneBulletCallback=function(t,e){this._onAddOneBulletCB=t,this._target=e},n.getIsSelf=function(){return this.isSelf},n.updateState=function(t,e){this.state=t,this.now=e,this.isSelf?this._resetState(t,e):this._tweenState(t,e)},n.onLoad=function(){this.hitFlg=0},n.onEnable=function(){this.collider=this.node.getComponent(o),this.collider.on(s.BEGIN_CONTACT,this.beginContact,this),this.ani=this.node.getComponent(l)},n.start=function(){},n.onDisable=function(){this.collider.off(s.BEGIN_CONTACT,this.beginContact,this)},n.onFlightDeadCallback=function(t,e){this._onFlightDead=t,this._target=e},n.onFlightRemoveCB=function(t,e){this._onFlightRemoveCB=t,this._target=e},n.beginContact=function(t,e){var i;console.log("Flight beginContact");var n=this.getPlayerId(),o=e.node.getComponent(f).getId();null==(i=this._onFlightDead)||i.call(this._target,n,o)},n.update=function(t){1==this.hitFlg&&(this.hitFlg=0,this.collider.enabled=!1,a(this.node).to(.5,{scale:new h(.2,.2,.2)}).call(this.fallTweenComplete.bind(this)).start())},n.fallTweenComplete=function(t){var e;console.log("fallTweenComplete"),this.node.active=!1;var i=this.node.getComponent(r);i.gravityScale=0,i.linearVelocity=new c(0,0),i.angularVelocity=0,null==(e=this._onFlightRemoveCB)||e.call(this._target,this.getPlayerId())},n._resetState=function(t,e){this._targetPos.set(t.pos.x,t.pos.y),this.node.position.equals(this._targetPos)||(this.setStatus(t.rollD),this.node.setPosition(this._targetPos))},n._tweenState=function(t,e){var i=new h(t.pos.x,t.pos.y);this._targetPos.equals(i)||(this._tweens.clear(),this.setStatus(t.rollD),this.node.setPosition(this._targetPos),this._targetPos.set(i),this._tweens.add(a(this.node).to(1/u.syncRate,{position:this._targetPos}).call((function(){})).start()))},n.setStatus=function(t){this._lastAni!==t&&(this._lastAni=t,this.ani.stop(),"idle"===t?this.ani.play("idle"):"left"===t?this.ani.play("rollleft"):"right"===t?this.ani.play("rollright"):""===t&&this.ani.play("attack"))},i}(d))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./gameConfig.ts","./Flight.ts","./Enemy.ts","./Joystick.ts"],(function(e){var t,n,a,i,l,s,o,r,y,m,u,p,f,h,g,c,d,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,l=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,o=e._decorator,r=e.Node,y=e.Prefab,m=e.Vec2,u=e.Label,p=e.instantiate,f=e.Vec3,h=e.Component},function(e){g=e.Player},function(e){c=e.gameConfig},function(e){d=e.Flight},function(e){_=e.Enemy},function(e){b=e.Joystick}],execute:function(){var v,P,w,I,C,M,D,B,E,S,R,N,x,F,H,k,z,L,T,A,O;s._RF.push({},"85bc2BycvxCnZcYPCUaIj6h","Game",void 0);var j=o.ccclass,G=o.property;e("Game",(v=j("Game"),P=G(r),w=G(y),I=G(r),C=G(r),M=G(r),D=G(y),B=G(y),E=G(y),S=G(b),v((x=t((N=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return t=e.call.apply(e,[this].concat(l))||this,a(t,"playerNode",x,i(t)),a(t,"flightPrefab",F,i(t)),a(t,"enemiesNode",H,i(t)),a(t,"roomIdLabel",k,i(t)),a(t,"scoreLabel",z,i(t)),a(t,"enemy01Prefab",L,i(t)),a(t,"enemy02Prefab",T,i(t)),a(t,"enemy03Prefab",A,i(t)),a(t,"joystick",O,i(t)),t.gameManager=void 0,t._player=void 0,t._selfSpeed=new m(0,0),t._selfRollD="",t._playerInstances={},t._enemyInstances={},t}n(t,e);var s=t.prototype;return s.onDisable=function(){},s.onLoad=function(){var e=this;this.joystick.options={onOperate:function(t){e._selfSpeed||(e._selfSpeed=new m),e._selfSpeed.set(t.x,t.y)},onOperateEnd:function(){e._selfRollD="idle",e._selfSpeed=void 0}},this._player=this.playerNode.getComponent(g),this._player.onEmemyDeadCallback(this.onEmemyDead,this)},s.init=function(e){var t=this;this.gameManager=e,this.gameManager.gameSystem.onNewArrow.push((function(e){t._onNewArrow(e)})),this.gameManager.gameSystem.onRemoveEnemy.push((function(e){t._onRemoveEnemy(e)})),this.gameManager.gameSystem.onBulletHitEnemy.push((function(e,n,a){t._onBulletHitEnemy(e,n,a)})),this.gameManager.gameSystem.onEnemyHitPlayer.push((function(e,n){t._onEnemyHitPlayer(e,n)}))},s.onEnable=function(){this.roomIdLabel.getComponent(u).string="房间号："+this.gameManager.getSelfRoomId()},s.start=function(){},s.update=function(e){this._selfSpeed&&this._selfSpeed.lengthSqr()?(this._selfRollD="",this._selfSpeed.x>10?this._selfRollD="right":this._selfSpeed.x<-10&&(this._selfRollD="left"),this.gameManager.sendClientInput({type:"PlayerMove",speed:{x:this._selfSpeed.x,y:this._selfSpeed.y},rollD:this._selfRollD,dt:e})):"idle"===this._selfRollD&&(this.gameManager.sendClientInput({type:"PlayerMove",speed:{x:0,y:0},rollD:this._selfRollD,dt:e}),this._selfRollD="-1"),this._updatePlayersPos(),this._updateEnemysPos()},s._updatePlayersPos=function(){for(var e,t=this.gameManager.state.players,n=l(t);!(e=n()).done;){var a=e.value,i=this._playerInstances[a.id];if(!i){console.log("_updatePlayersPos playerState.id:"+a.id);var s=p(this.flightPrefab),o=new f(a.pos.x,a.pos.y,0);s.position=o,(i=this._playerInstances[a.id]=s.getComponent(d)).setTargetPos(o),i.onAddOneBulletCallback(this.onAddOneBulletCB,this),i.onFlightDeadCallback(this.onFlightDead,this),i.onFlightRemoveCB(this.flightRemoveCB,this),i.init(a,a.id===this.gameManager.selfPlayerId),this.playerNode.addChild(s)}i.updateState(a,this.gameManager.state.now)}},s._updateEnemysPos=function(){for(var e,t=this.gameManager.state.enemys,n=t.length-1;n>-1;n--){e=t[n];var a=this._onNewEnemy(e);a&&a.updateState(e,this.gameManager.state.now)}},s._onNewArrow=function(e){var t,n=this.gameManager.state.players.find((function(t){return t.id===e.fromPlayerId}));if(n){var a=null==(t=this._playerInstances[n.id])?void 0:t.node;a&&this._player.addOneBullet(e,a.position,this.gameManager.state.now)}},s._onNewEnemy=function(e){var t,n=this._enemyInstances[e.id];if(n)return n;if(t=1==e.planeType?p(this.enemy01Prefab):2==e.planeType?p(this.enemy02Prefab):3==e.planeType?p(this.enemy03Prefab):p(this.enemy01Prefab)){var a=new f(e.pos.x,e.pos.y,0);(n=this._enemyInstances[e.id]=t.getComponent(_)).setTargetPos(a),this.enemiesNode.addChild(t),n.init(e,this.gameManager.state.now)}return n},s._onRemoveEnemy=function(e){var t=this._enemyInstances[e.id];t&&t.remove()},s._onBulletHitEnemy=function(e,t,n){this._player.onBulletHitEnemy(t);var a=this._enemyInstances[n];if(a&&a.setHitFlg(1),e==this.gameManager.selfPlayerId){var i=this.gameManager.state.players.find((function(t){return t.id===e}));i&&(this.scoreLabel.getComponent(u).string=i.score+"")}},s._onEnemyHitPlayer=function(e,t){var n=this._playerInstances[e];n&&n.setHitFlg(1);var a=this._enemyInstances[t];a&&a.setHitFlg(1)},s.onDestroy=function(){this.unscheduleAllCallbacks()},s.onAddOneBulletCB=function(e){var t=this.gameManager.selfPlayerId;if(e==t){var n,a=this.gameManager.state.players.find((function(t){return t.id===e}));if(!a)return;var i=null==(n=this._playerInstances[e])?void 0:n.node;if(!i||0==i.active)return;var l=new m(0,c.playBulletDis),s=new m(a.pos.x,a.pos.y).add2f(l.x,l.y);this.gameManager.sendClientInput({type:"PlayerAttack",bulletNum:1,targetPos:{x:s.x,y:s.y},targetTime:this.gameManager.state.now+c.playBulletFlyTime})}},s.onEmemyDead=function(e,t){this.gameManager.sendClientInput({type:"BeginContact",contactNum:1,id1:e,id2:t,nowTime:this.gameManager.state.now})},s.onFlightDead=function(e,t){this.gameManager.sendClientInput({type:"BeginContact",contactNum:2,id1:e,id2:t,nowTime:this.gameManager.state.now})},s.flightRemoveCB=function(e){console.log("flightRemoveCB playerId:"+e),delete this._playerInstances[e]},s.enemyRemoveCB=function(e){delete this._enemyInstances[e]},t}(h)).prototype,"playerNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(N.prototype,"flightPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(N.prototype,"enemiesNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(N.prototype,"roomIdLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(N.prototype,"scoreLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(N.prototype,"enemy01Prefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(N.prototype,"enemy02Prefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(N.prototype,"enemy03Prefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(N.prototype,"joystick",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=N))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/gameConfig.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"b14a4zfrL5Iaq07A9ybmJ7Y","gameConfig",void 0);e("gameConfig",{designWidth:750,designHeight:1334,syncRate:10,moveSpeed:100,arrowFlyTime:500,arrowDistance:8,arrowAttackRadius:2,arrowDizzyTime:1e3,playBulletFlyTime:500,playBulletDis:400});i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index2.mjs","./index3.mjs","./GameSystem.ts","./serviceProto.ts"],(function(e){var t,n,s,r,i,a,o,c,u;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,n=e.extends,s=e.createClass,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy},function(e){o=e.WsClient},null,function(e){c=e.GameSystem},function(e){u=e.serviceProto}],execute:function(){a._RF.push({},"53b02ucwshGOrY81/dGIG58","GameManager",void 0);e("GameManager",function(){var e=a.prototype;function a(){var e,t=this;this.client=void 0,this.gameSystem=new c,this.lastServerState=this.gameSystem.state,this.lastRecvSetverStateTime=0,this.selfPlayerId=-1,this.selfRoomId=-1,this.lastSN=0,this._onJoinCB=void 0,this._target=void 0,this.pendingInputMsgs=[];var n=this.client=new o(u,{server:"ws://test44.44vs.com:3000",json:!0,heartbeat:{interval:1e3,timeout:5e3}});n.listenMsg("server/Frame",(function(e){t._onServerSync(e)}));var s=parseInt((null==(e=location.search.match(/\blag=(\d+)/))?void 0:e[1])||"0");s&&(n.flows.preRecvDataFlow.push(r(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,s)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))),n.flows.preSendDataFlow.push(r(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,s)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)}))))),window.gm=this}return e.getSelfRoomId=function(){return this.selfRoomId},e.findRoom=function(){var e=r(i().mark((function e(t){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client.isConnected){e.next=8;break}return e.next=3,this.client.connect();case 3:if(e.sent.isSucc){e.next=8;break}return e.next=7,new Promise((function(e){setTimeout(e,2e3)}));case 7:return e.abrupt("return",this.findRoom(t));case 8:return e.next=10,this.client.callApi("FindRoom",t);case 10:if((n=e.sent).isSucc){e.next=16;break}return alert(n.err.message),e.abrupt("return");case 16:console.log("加入房间成功"),this.gameSystem.reset(n.res.gameState),this.lastServerState=Object.merge(n.res.gameState),this.lastRecvSetverStateTime=Date.now(),this.selfPlayerId=t.userId,this.selfRoomId=n.res.roomId,console.log("findRoom roomId:"+this.selfRoomId),null==(s=this._onJoinCB)||s.call(this._target);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.join=function(){var e=r(i().mark((function e(t){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client.isConnected){e.next=8;break}return e.next=3,this.client.connect();case 3:if(e.sent.isSucc){e.next=8;break}return e.next=7,new Promise((function(e){setTimeout(e,2e3)}));case 7:return e.abrupt("return",this.join(t));case 8:return e.next=10,this.client.callApi("Join",t);case 10:if((n=e.sent).isSucc){e.next=16;break}return alert(n.err.message),e.abrupt("return");case 16:console.log("加入房间成功"),this.gameSystem.reset(n.res.gameState),this.lastServerState=Object.merge(n.res.gameState),this.lastRecvSetverStateTime=Date.now(),this.selfPlayerId=t.userId,this.selfRoomId=n.res.roomId,console.log("join roomId:"+this.selfRoomId),null==(s=this._onJoinCB)||s.call(this._target);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.onJoinCallback=function(e,t){this._onJoinCB=e,this._target=t},e._onServerSync=function(e){var s,r=this;this.gameSystem.reset(this.lastServerState);for(var i,a=t(e.inputs);!(i=a()).done;){var o=i.value;this.gameSystem.applyInput(o)}this.lastServerState=Object.merge({},this.gameSystem.state),this.lastRecvSetverStateTime=Date.now();var c=null!=(s=e.lastSn)?s:-1;this.pendingInputMsgs.remove((function(e){return e.sn<=c})),this.pendingInputMsgs.forEach((function(e){e.inputs.forEach((function(e){r.gameSystem.applyInput(n({},e,{playerId:r.selfPlayerId}))}))}))},e.sendClientInput=function(e){if(this.selfPlayerId&&this.client.isConnected){var t={sn:++this.lastSN,inputs:[e]};this.pendingInputMsgs.push(t),this.client.sendMsg("client/ClientInput",t),this.gameSystem.applyInput(n({},e,{playerId:this.selfPlayerId}))}},e.localTimePast=function(){var e=Date.now()-this.lastRecvSetverStateTime;console.log("GameManager sync dt:"+e),this.gameSystem.applyInput({type:"TimePast",dt:e}),this.lastRecvSetverStateTime=Date.now()},s(a,[{key:"state",get:function(){return this.gameSystem.state}}]),a}());a._RF.pop()}}}));

System.register("chunks:///_virtual/GameRecord.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"05509TQCUxGA76kch9D3ISj","GameRecord",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,s,n;return{setters:[function(e){t=e.extends,r=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"e1831977jJFfIXfHC8xvMI5","GameSystem",void 0);e("GameSystem",function(){function e(){this._state={now:0,players:[],enemys:[],arrows:[],nextArrowId:1},this.onNewArrow=[],this.onRemoveEnemy=[],this.onBulletHitEnemy=[],this.onEnemyHitPlayer=[]}var n=e.prototype;return n.reset=function(e){this._state=Object.merge({},e)},n.getStage=function(e){return e<10?1:e<20?2:e<40?3:e<60?4:e<90?5:e<120?6:e<160?7:e<200?8:e<240?9:10},n.applyInput=function(e){var s=this;if("PlayerMove"===e.type){var n=this._state.players.find((function(t){return t.id===e.playerId}));if(!n)return;if(n.dizzyEndTime&&n.dizzyEndTime>this._state.now)return;var i=e.speed.x,a=e.speed.y;n.pos.x+=i*e.dt,n.pos.y+=a*e.dt,n.rollD=e.rollD}else if("PlayerAttack"===e.type){var o=this._state.players.find((function(t){return t.id===e.playerId}));if(o){var u,y,l=o.mainBulletNum;1==l?y=e.targetPos.x:2==l?y=e.targetPos.x-10:3==l&&(y=e.targetPos.x-20);for(var p=0;p<o.mainBulletNum;p++)u={id:this._state.nextArrowId++,bulletType:1,fromPlayerId:e.playerId,targetPos:{x:y+20*p,y:e.targetPos.y},targetTime:e.targetTime},this._state.arrows.push(u),this.onNewArrow.forEach((function(e){return e(u)}))}}else if("BeginContact"===e.type){if(1==e.contactNum){var f=e.id1,d=e.id2,m=this._state.arrows.find((function(e){return e.id===f})),c=0;if(m){c=m.fromPlayerId;var h=this._state.players.find((function(e){return e.id===c}));if(h){h.score+=1;var _=this.getStage(h.score);_<2?h.mainBulletNum=1:_<5?h.mainBulletNum=2:_<10&&(h.mainBulletNum=3),this._state.arrows=this._state.arrows.filter((function(e){return e.id!==f})),this._state.enemys=this._state.enemys.filter((function(e){return e.id!==d})),this.onBulletHitEnemy.forEach((function(e){return e(c,f,d)}))}}}else if(2==e.contactNum){var v=e.id1,g=e.id2,x=this._state.players.find((function(e){return e.id===v}));x&&(x.score=0,this.onEnemyHitPlayer.forEach((function(e){return e(v,g)})),this._state.players.remove((function(e){return e.id===v})),this._state.enemys.remove((function(e){return e.id===g})))}}else if("PlayerJoin"===e.type)this._state.players.push({id:e.playerId,planeType:0,pos:t({},e.pos),rollD:"",score:e.score,mainBulletNum:e.mainBulletNum});else if("EnemyEnemyJoin"===e.type){var P={id:e.playerId,planeType:e.planeType,speed:e.speed,pos:t({},e.pos),targetPos:t({},e.targetPos),isUpgradeEnemy:e.isUpgradeEnemy};this._state.enemys.push(P)}else if("PlayerLeave"===e.type)this._state.players.remove((function(t){return t.id===e.playerId}));else if("TimePast"===e.type){this._state.now+=e.dt;for(var w,E=0,I=0,N=0,B=0,T=0,A=0,H=!1,S=this._state.enemys.length-1;S>-1;S--){if(w=this._state.enemys[S],H=!1,w.isUpgradeEnemy)for(var b,R=function(){var e=b.value;if(e&&"idle"===e.rollD&&(T=e.pos.x-w.pos.x,A=e.pos.y-w.pos.y,(N=T*T+A*A)<=1e4)){s._state.enemys.splice(S,1),s.onRemoveEnemy.forEach((function(e){return e(w)})),H=!0;var t={id:s._state.nextArrowId++,bulletType:2,fromPlayerId:e.id,targetPos:{x:e.pos.x-100,y:e.pos.y+1e3}};return s._state.arrows.push(t),s.onNewArrow.forEach((function(e){return e(t)})),t={id:s._state.nextArrowId++,bulletType:2,fromPlayerId:e.id,targetPos:{x:e.pos.x+100,y:e.pos.y+1e3}},s._state.arrows.push(t),s.onNewArrow.forEach((function(e){return e(t)})),1}},z=r(this._state.players);!(b=z()).done&&!R(););if(0==H)if(T=w.targetPos.x-w.pos.x,A=w.targetPos.y-w.pos.y,N=T*T+A*A,w.dir?(E=w.dir.x,I=w.dir.y):(B=Math.sqrt(N),E=T/B,I=A/B,w.dir={x:E,y:I}),N<=.1*.1)this._state.enemys.splice(S,1),this.onRemoveEnemy.forEach((function(e){return e(w)}));else{var D=w.speed*e.dt*.06;D*D>=N?(w.pos.x=w.targetPos.x,w.pos.y=w.targetPos.y):(w.pos.x+=E*D,w.pos.y+=I*D)}}}},s(e,[{key:"state",get:function(){return this._state}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,s,i,c,e,h;return{setters:[function(o){t=o.inheritsLoose,n=o.createClass},function(o){s=o.cclegacy,i=o._decorator,c=o.Vec3,e=o.Node,h=o.Component}],execute:function(){var u;s._RF.push({},"ccc7fTjElVEQqB07I1JvC+N","Joystick",void 0);var a=i.ccclass;i.property,new c,o("Joystick",a("Joystick")(u=function(o){function s(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=o.call.apply(o,[this].concat(s))||this)._options=void 0,t._lastTouchPos=void 0,t._lastTouchTime=0,t.MAX_SPEED=60,t}t(s,o);var i=s.prototype;return i.onLoad=function(){this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_MOVE,this.onTouch,this),this.node.on(e.EventType.TOUCH_END,this.onTouchEnd,this)},i.onTouchStart=function(o){if(o.touch){var t=o.touch.getUILocation(),n=new c(t.x,t.y,0);this._lastTouchPos=n,this._lastTouchTime=performance.now()}},i.onTouch=function(o){if(o.touch){var t=performance.now(),n=o.touch.getUILocation(),s=new c(n.x,n.y,0);if(this._lastTouchPos&&0==this._lastTouchPos.equals(s)){var i,e=(t-this._lastTouchTime)/1e3,h=(s.x-this._lastTouchPos.x)/e,u=(s.y-this._lastTouchPos.y)/e;null==(i=this.options)||i.onOperate({x:h||0,y:u||0})}this._lastTouchPos=s,this._lastTouchTime=t}},i.onTouchEnd=function(o){var t;this._lastTouchPos=void 0,this._lastTouchTime=0,null==(t=this.options)||t.onOperateEnd()},n(s,[{key:"options",get:function(){return this._options},set:function(o){this._options=o}}]),s}(h))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/Lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Game.ts"],(function(n){var o,i,t,e,a,r,l,c,u,s,m,g;return{setters:[function(n){o=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Node,c=n.Button,u=n.EditBox,s=n.Component},function(n){m=n.GameManager},function(n){g=n.Game}],execute:function(){var p,d,h,f,y,b,B,C,J,v,k;a._RF.push({},"ac359Z1EqlP2omGQ432qMzH","Lobby",void 0);var M=r.ccclass,R=r.property;n("Lobby",(p=M("Lobby"),d=R(l),h=R(l),f=R(l),y=R(l),p((C=o((B=function(n){function o(){for(var o,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return o=n.call.apply(n,[this].concat(a))||this,t(o,"gameRoom",C,e(o)),t(o,"quicklyJoinBtn",J,e(o)),t(o,"findJoinBtn",v,e(o)),t(o,"inputRoomIdTxt",k,e(o)),o.editBox=void 0,o.gameManager=void 0,o}i(o,n);var a=o.prototype;return a.start=function(){},a.onLoad=function(){this.quicklyJoinBtn.on(c.EventType.CLICK,this.onQuicklyJoinBtnClick,this),this.findJoinBtn.on(c.EventType.CLICK,this.onFindJoinBtnClick,this),this.editBox=this.inputRoomIdTxt.getComponent(u),this.gameManager=new m,this.gameManager.onJoinCallback(this.onJoinCB,this),this.gameRoom.getComponent(g).init(this.gameManager)},a.update=function(n){},a.onQuicklyJoinBtnClick=function(){console.log("onQuicklyJoinBtnClick");var n={userId:Math.floor(1e4*Math.random())};this.gameManager.join(n)},a.onFindJoinBtnClick=function(){console.log("onFindJoinBtnClick");var n={roomId:Number(this.editBox.string),userId:Math.floor(1e4*Math.random())};this.gameManager.findRoom(n)},a.onJoinCB=function(){console.log("onJoinCB"),this.gameRoom.active=!0,this.node.active=!1},o}(s)).prototype,"gameRoom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=o(B.prototype,"quicklyJoinBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=o(B.prototype,"findJoinBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=o(B.prototype,"inputRoomIdTxt",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=B))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./env.ts","./migrate-canvas.ts","./Enemy.ts","./EnemyBullet.ts","./Flight.ts","./Game.ts","./Joystick.ts","./Lobby.ts","./Maps.ts","./Player.ts","./PlayerBullet.ts","./GameManager.ts","./MathUtil.ts","./TweenPool.ts","./GameSystem.ts","./gameConfig.ts","./ArrowState.ts","./EnemyState.ts","./PlayerState.ts","./PtlAddGameRecord.ts","./PtlFindRoom.ts","./PtlGetGameRecord.ts","./PtlJoin.ts","./PtlUpdateGameRecord.ts","./MsgClientInput.ts","./GameRecord.ts","./MsgFrame.ts","./serviceProto.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Maps.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,s=t.Vec3,r=t.Component}],execute:function(){var i;e._RF.push({},"d4337jnudxIi7Rc7VzwqqtJ","Maps",void 0);var c=o.ccclass;o.property,t("Maps",c("Maps")(i=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).ySpeed=1,n.pos0=new s(0,0,0),n.pos1=new s(0,1334,0),n}n(e,t);var o=e.prototype;return o.onEnable=function(){this.node.children[0].setPosition(this.pos0),this.node.children[1].setPosition(this.pos1)},o.start=function(){},e}(r))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e6cc3JUKYtCeYsaq42kjaDD","MathUtil",void 0);t("MathUtil",function(){function t(){}return t.limit=function(t,n,c){return Math.min(c,Math.max(n,t))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){var n,e,t,i,r,o,a;return{setters:[function(c){n=c.cclegacy,e=c.director,t=c.Director,i=c.Canvas,r=c.Camera,o=c.game,a=c.Node}],execute:function(){n._RF.push({},"3f141c+VKdCPZwiDv5aHGNP","migrate-canvas",void 0);var c=1048575;function l(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,l(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,a,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var v=null==(a=e.getScene())?void 0:a.getComponentsInChildren(r),p=0;v.forEach((function(n){return p|=n.visibility&c}));for(var u=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&u.push.apply(u,d.filter((function(n){return!!n.cameraComponent})))}}u.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&c}))){var e=~p,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,l(n.node,t),p|=e}}))}}));var s=a.prototype.setParent;function m(n){var e=0,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=m(n.parent)),e)}a.prototype.setParent=function(n,e){if(s.call(this,n,e),n){var t=m(this);t&&(this.layer=t,l(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/MsgClientInput.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"6a8e5ubV2tICbLUvih6KCCg","MsgClientInput",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/MsgFrame.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"a671592akxDUZOMdB1XDDGc","MsgFrame",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerBullet.ts","./Enemy.ts"],(function(e){var t,n,o,i,a,s,r,l,c,u,p,y,h,f,d,_,v,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){s=e.cclegacy,r=e._decorator,l=e.Prefab,c=e.input,u=e.Input,p=e.instantiate,y=e.Vec3,h=e.Collider2D,f=e.Contact2DType,d=e.Vec2,_=e.KeyCode,v=e.Component},function(e){b=e.PlayerBullet},function(e){g=e.Enemy}],execute:function(){var E,m,C,D,K;s._RF.push({},"246e8keu/JMRLl8NroJCPr2","Player",void 0);var P=r.ccclass,w=r.property;e("Player",(E=P("Player"),m=w(l),E((K=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,o(t,"bulletPrefab",K,i(t)),t._onEmemyDead=void 0,t._target=void 0,t._options=void 0,t._arrowInstances={},t}n(t,e);var s=t.prototype;return s.start=function(){},s.update=function(e){},s.onLoad=function(){},s.onEnable=function(){c.on(u.EventType.KEY_DOWN,this.onKeyDown,this),c.on(u.EventType.KEY_UP,this.onKeyUp,this)},s.onDisable=function(){c.off(u.EventType.KEY_DOWN,this.onKeyDown,this),c.off(u.EventType.KEY_UP,this.onKeyUp,this)},s.onEmemyDeadCallback=function(e,t){this._onEmemyDead=e,this._target=t},s.addOneBullet=function(e,t,n){var o=this._arrowInstances[e.id];if(!o){var i=p(this.bulletPrefab);this.node.addChild(i),2==e.bulletType&&i.setScale(new y(2,2)),(o=this._arrowInstances[e.id]=i.getComponent(b)).init(e,t,n),o.onBulletRemoveCB(this.bulletRemoveCB,this),i.getComponent(h).on(f.BEGIN_CONTACT,this.beginContact,this)}},s.beginContact=function(e,t){var n;console.log("beginContact");var o=e.node,i=t.node,a=o.getComponent(b).getId(),s=i.getComponent(g).getId();null==(n=this._onEmemyDead)||n.call(this._target,a,s)},s.onBulletHitEnemy=function(e){var t=this._arrowInstances[e];t&&t.setDestoryFlg(1)},s.onKeyDown=function(e){var t;console.log("onKeyDown");var n=new d(0,0);switch(e.keyCode){case _.KEY_A:n.set(-10,0);break;case _.KEY_D:n.set(10,0);break;case _.KEY_W:n.set(0,10);break;case _.KEY_S:n.set(0,-10)}null==(t=this.options)||t.onOperate({x:n.x||0,y:n.y||0})},s.onKeyUp=function(e){var t;console.log("onKeyUp"),null==(t=this.options)||t.onOperateEnd()},s.bulletRemoveCB=function(e){delete this._arrowInstances[e]},a(t,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),t}(v)).prototype,"bulletPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=D))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,s,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,s=t.Vec3,n=t.Component}],execute:function(){var r;i._RF.push({},"48c30MQGWVK/ILDMp7Mw3Tp","PlayerBullet",void 0);var d=o.ccclass;o.property,t("PlayerBullet",d("PlayerBullet")(r=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).destoryFlg=0,e.id=void 0,e.state=void 0,e._onBulletRemoveCB=void 0,e._target=void 0,e._startPos=new s,e._endPos=new s,e.dir=void 0,e.dirX=0,e.dirY=0,e._isRemoved=!1,e}e(i,t);var o=i.prototype;return o.getId=function(){return this.id},o.onLoad=function(){this.destoryFlg=0},o.start=function(){},o.init=function(t,e,i){this.id=t.id,this.state=t,this._startPos.set(e.x,e.y+40),this._endPos.set(t.targetPos.x,t.targetPos.y),this.node.position=this._startPos},o.onBulletRemoveCB=function(t,e){this._onBulletRemoveCB=t,this._target=e},o.setDestoryFlg=function(t){this.destoryFlg=t},o.update=function(t){1==this.destoryFlg?(this.destoryFlg=0,this.remove()):this._updatePosAndForward()},o._updatePosAndForward=function(){var t=this._endPos.x-this.node.position.x,e=this._endPos.y-this.node.position.y,i=t*t+e*e;if(i<=.1*.1)this.remove();else{if(!this.dir){var o=Math.sqrt(i);this.dirX=t/o,this.dirY=e/o,this.dir={x:this.dirX,y:this.dirY}}var n;n=36>=i?new s(this._endPos.x,this._endPos.y):new s(this.node.position.x+6*this.dirX,this.node.position.y+6*this.dirY),this.node.setPosition(n)}},o.remove=function(){var t;this._isRemoved||(this._isRemoved=!0,this.node.removeFromParent(),this.node.destroy(),null==(t=this._onBulletRemoveCB)||t.call(this._target,this.getId()))},i}(n))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerState.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e60a3gmV/FOiLD+zn4tK/mU","PlayerState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PtlAddGameRecord.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"127c9nx5ChEXaVyfIphzmUK","PtlAddGameRecord",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/PtlFindRoom.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"88ed7prmHVJbo6J84MiVAfh","PtlFindRoom",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PtlGetGameRecord.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8a7c1KOoOdOtY5Fcbvbwa+z","PtlGetGameRecord",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/PtlJoin.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"1f497+8B8xKfLuhOXFr5Q3z","PtlJoin",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PtlUpdateGameRecord.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cf076oJCpFFh7LZZIo55AJE","PtlUpdateGameRecord",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/serviceProto.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"1f0efqgty1OMrl7dRlmReaF","serviceProto",void 0);e("serviceProto",{version:15,services:[{id:0,name:"client/ClientInput",type:"msg"},{id:3,name:"AddGameRecord",type:"api"},{id:6,name:"FindRoom",type:"api"},{id:4,name:"GetGameRecord",type:"api"},{id:1,name:"Join",type:"api"},{id:5,name:"UpdateGameRecord",type:"api"},{id:2,name:"server/Frame",type:"msg"}],types:{"client/MsgClientInput/MsgClientInput":{type:"Interface",properties:[{id:0,name:"sn",type:{type:"Number"}},{id:1,name:"inputs",type:{type:"Array",elementType:{type:"Reference",target:"client/MsgClientInput/ClientInput"}}}]},"client/MsgClientInput/ClientInput":{type:"Union",members:[{id:0,type:{target:{type:"Reference",target:"../game/GameSystem/PlayerMove"},keys:["playerId"],type:"Omit"}},{id:1,type:{target:{type:"Reference",target:"../game/GameSystem/PlayerAttack"},keys:["playerId"],type:"Omit"}},{id:2,type:{target:{type:"Reference",target:"../game/GameSystem/BeginContact"},keys:["playerId"],type:"Omit"}}]},"../game/GameSystem/PlayerMove":{type:"Interface",properties:[{id:0,name:"type",type:{type:"Literal",literal:"PlayerMove"}},{id:1,name:"playerId",type:{type:"Number"}},{id:2,name:"speed",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:4,name:"rollD",type:{type:"String"}},{id:3,name:"dt",type:{type:"Number"}}]},"../game/GameSystem/PlayerAttack":{type:"Interface",properties:[{id:0,name:"type",type:{type:"Literal",literal:"PlayerAttack"}},{id:4,name:"bulletNum",type:{type:"Number"}},{id:1,name:"playerId",type:{type:"Number"}},{id:2,name:"targetPos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:3,name:"targetTime",type:{type:"Number"}}]},"../game/GameSystem/BeginContact":{type:"Interface",properties:[{id:5,name:"playerId",type:{type:"Number"}},{id:0,name:"type",type:{type:"Literal",literal:"BeginContact"}},{id:1,name:"contactNum",type:{type:"Number"}},{id:6,name:"id1",type:{type:"Number"}},{id:7,name:"id2",type:{type:"Number"}},{id:4,name:"nowTime",type:{type:"Number"}}]},"PtlAddGameRecord/ReqAddGameRecord":{type:"Interface",properties:[{id:0,name:"newGameRecord",type:{target:{type:"Reference",target:"models/GameRecord/GameRecord"},keys:["roomId","create"],type:"Pick"}}]},"models/GameRecord/GameRecord":{type:"Interface",properties:[{id:0,name:"_id",type:{type:"String"}},{id:1,name:"roomId",type:{type:"String"}},{id:2,name:"score",type:{type:"Number"},optional:!0},{id:3,name:"fellowPlayerId",type:{type:"Number"},optional:!0},{id:4,name:"create",type:{type:"Interface",properties:[{id:0,name:"playerId",type:{type:"Number"}},{id:1,name:"time",type:{type:"Date"}}]}},{id:5,name:"end",type:{type:"Interface",properties:[{id:0,name:"time",type:{type:"Date"}}]},optional:!0}]},"PtlAddGameRecord/ResAddGameRecord":{type:"Interface",properties:[{id:0,name:"insertedId",type:{type:"String"}}]},"PtlFindRoom/ReqFindRoom":{type:"Interface",properties:[{id:0,name:"roomId",type:{type:"Number"}},{id:1,name:"userId",type:{type:"Number"}}]},"PtlFindRoom/ResFindRoom":{type:"Interface",properties:[{id:0,name:"roomId",type:{type:"Number"}},{id:1,name:"gameState",type:{type:"Reference",target:"../game/GameSystem/GameSystemState"}}]},"../game/GameSystem/GameSystemState":{type:"Interface",properties:[{id:0,name:"now",type:{type:"Number"}},{id:1,name:"players",type:{type:"Array",elementType:{type:"Reference",target:"../game/state/PlayerState/PlayerState"}}},{id:4,name:"enemys",type:{type:"Array",elementType:{type:"Reference",target:"../game/state/EnemyState/EnemyState"}}},{id:2,name:"arrows",type:{type:"Array",elementType:{type:"Reference",target:"../game/state/ArrowState/ArrowState"}}},{id:3,name:"nextArrowId",type:{type:"Number"}}]},"../game/state/PlayerState/PlayerState":{type:"Interface",properties:[{id:0,name:"id",type:{type:"Number"}},{id:3,name:"planeType",type:{type:"Number"}},{id:1,name:"pos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:6,name:"rollD",type:{type:"String"}},{id:2,name:"dizzyEndTime",type:{type:"Number"},optional:!0},{id:5,name:"score",type:{type:"Number"}},{id:7,name:"mainBulletNum",type:{type:"Number"}},{id:4,name:"gameOver",type:{type:"Boolean"},optional:!0}]},"../game/state/EnemyState/EnemyState":{type:"Interface",properties:[{id:0,name:"id",type:{type:"Number"}},{id:1,name:"planeType",type:{type:"Number"}},{id:5,name:"speed",type:{type:"Number"}},{id:3,name:"pos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:6,name:"dir",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]},optional:!0},{id:4,name:"targetPos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:7,name:"isUpgradeEnemy",type:{type:"Boolean"}}]},"../game/state/ArrowState/ArrowState":{type:"Interface",properties:[{id:0,name:"id",type:{type:"Number"}},{id:4,name:"bulletType",type:{type:"Number"}},{id:1,name:"fromPlayerId",type:{type:"Number"}},{id:2,name:"targetTime",type:{type:"Number"},optional:!0},{id:3,name:"targetPos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}}]},"PtlGetGameRecord/ReqGetGameRecord":{type:"Interface",properties:[{id:0,name:"_id",type:{type:"String"}}]},"PtlGetGameRecord/ResGetGameRecord":{type:"Interface",properties:[{id:0,name:"gameRecord",type:{type:"Reference",target:"models/GameRecord/GameRecord"}}]},"PtlJoin/ReqJoin":{type:"Interface",properties:[{id:1,name:"userId",type:{type:"Number"}}]},"PtlJoin/ResJoin":{type:"Interface",properties:[{id:2,name:"roomId",type:{type:"Number"}},{id:1,name:"gameState",type:{type:"Reference",target:"../game/GameSystem/GameSystemState"}}]},"PtlUpdateGameRecord/ReqUpdateGameRecord":{type:"Interface",properties:[{id:0,name:"update",type:{type:"Intersection",members:[{id:0,type:{type:"Partial",target:{target:{type:"Reference",target:"models/GameRecord/GameRecord"},keys:["score","fellowPlayerId"],type:"Pick"}}},{id:1,type:{type:"Interface",properties:[{id:0,name:"_id",type:{type:"String"}}]}}]}}]},"PtlUpdateGameRecord/ResUpdateGameRecord":{type:"Interface",properties:[{id:0,name:"matchedNum",type:{type:"Number"}}]},"server/MsgFrame/MsgFrame":{type:"Interface",properties:[{id:0,name:"inputs",type:{type:"Array",elementType:{type:"Reference",target:"../game/GameSystem/GameSystemInput"}}},{id:1,name:"lastSn",type:{type:"Number"},optional:!0}]},"../game/GameSystem/GameSystemInput":{type:"Union",members:[{id:0,type:{type:"Reference",target:"../game/GameSystem/PlayerMove"}},{id:1,type:{type:"Reference",target:"../game/GameSystem/PlayerAttack"}},{id:6,type:{type:"Reference",target:"../game/GameSystem/BeginContact"}},{id:2,type:{type:"Reference",target:"../game/GameSystem/PlayerJoin"}},{id:5,type:{type:"Reference",target:"../game/GameSystem/EnemyEnemyJoin"}},{id:3,type:{type:"Reference",target:"../game/GameSystem/PlayerLeave"}},{id:4,type:{type:"Reference",target:"../game/GameSystem/TimePast"}}]},"../game/GameSystem/PlayerJoin":{type:"Interface",properties:[{id:0,name:"type",type:{type:"Literal",literal:"PlayerJoin"}},{id:1,name:"playerId",type:{type:"Number"}},{id:2,name:"pos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:3,name:"score",type:{type:"Number"}},{id:4,name:"mainBulletNum",type:{type:"Number"}}]},"../game/GameSystem/EnemyEnemyJoin":{type:"Interface",properties:[{id:0,name:"type",type:{type:"Literal",literal:"EnemyEnemyJoin"}},{id:1,name:"planeType",type:{type:"Number"}},{id:2,name:"playerId",type:{type:"Number"}},{id:6,name:"speed",type:{type:"Number"}},{id:4,name:"pos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:5,name:"targetPos",type:{type:"Interface",properties:[{id:0,name:"x",type:{type:"Number"}},{id:1,name:"y",type:{type:"Number"}}]}},{id:7,name:"isUpgradeEnemy",type:{type:"Boolean"}}]},"../game/GameSystem/PlayerLeave":{type:"Interface",properties:[{id:0,name:"type",type:{type:"Literal",literal:"PlayerLeave"}},{id:1,name:"playerId",type:{type:"Number"}}]},"../game/GameSystem/TimePast":{type:"Interface",properties:[{id:0,name:"type",type:{type:"Literal",literal:"TimePast"}},{id:1,name:"dt",type:{type:"Number"}}]}}});t._RF.pop()}}}));

System.register("chunks:///_virtual/TweenPool.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"0e776cfwcVLJJgt0LvArxQ3","TweenPool",void 0);t("TweenPool",function(){function t(){this._tweens=[]}var e=t.prototype;return e.add=function(t){this._tweens.push(t)},e.clear=function(){var t;null==(t=this._tweens)||t.forEach((function(t){return t.stop()})),this._tweens=[]},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});